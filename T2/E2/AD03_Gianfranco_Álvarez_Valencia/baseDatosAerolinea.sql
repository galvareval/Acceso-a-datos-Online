DROP DATABASE IF EXISTS AEROLINEA;
CREATE DATABASE AEROLINEA;
USE AEROLINEA;


CREATE TABLE VUELOS
( COD_VUELO VARCHAR(10) PRIMARY KEY,
  HORA_SALIDA DATETIME,
  DESTINO VARCHAR(15),
  PROCEDENCIA VARCHAR(15),
  PLAZAS_TURISTA INTEGER,
  PLAZAS_PRIMERA INTEGER
);


CREATE  TABLE PASAJEROS
(
  DNI  VARCHAR(9),
  COD_VUELO VARCHAR(10),
  TIPO_PLAZA ENUM('TU', 'PR'), -- 'TU': TURISTA, 'PR': PRIMERA
  PLAZA VARCHAR(3),
  CONSTRAINT PK_PASAJEROS PRIMARY KEY(COD_VUELO, PLAZA),
  CONSTRAINT FK_PASAJEROS FOREIGN KEY(COD_VUELO) REFERENCES VUELOS(COD_VUELO),
  CONSTRAINT UK_PASAJEROS UNIQUE(COD_VUELO, DNI)
);


INSERT INTO VUELOS VALUES('IB-SP-4567','2018/03/27 10:30','PARIS','MADRID',160,6);
INSERT INTO VUELOS VALUES('IB-BA-46DC','2018/03/28 12:30','ROMA','MADRID',160,6);
INSERT INTO VUELOS VALUES('FR-DC-4667','2018/03/28 13:30','BRUSELAS','SEVILLA',160,6);
INSERT INTO VUELOS VALUES('AV-DC-347','2018/03/29 13:35','VALENCIA','ROMA',210,10);
INSERT INTO VUELOS VALUES('SP-DC-438','2018/03/30 09:20','MOSCÚ','SEVILLA',160,6);
INSERT INTO VUELOS VALUES('AI-D7-347','2018/03/30 13:35','BILBAO','MOSCÚ',210,6);
INSERT INTO VUELOS VALUES('IB-D5-347','2018/04/01 13:35','ZARAGOZA','PARIS',210,10);
INSERT INTO VUELOS VALUES('FR-DC7-247','2018/04/01 15:35','CORDOBA','EL CAIRO',100,4);
INSERT INTO VUELOS VALUES('AV-DC9-233','2018/04/01 17:35','VALENCIA','SOFÍA',100,4);
INSERT INTO VUELOS VALUES('FR-DC2-269','2018/04/01 19:00','CÓRDOBA','MANILA',180,6);
INSERT INTO VUELOS VALUES('IB-98779','2018/04/02 08:00','MADRID','LIMA',250,10);
INSERT INTO VUELOS VALUES('AV-DC2-269','2018/04/02 12:00','MADRID','LA HAYA',180,6);
INSERT INTO VUELOS VALUES('AI-1289-9','2018/04/02 14:30','BARCELONA','BONN',180,6);


INSERT INTO PASAJEROS VALUES('05235652R','IB-SP-4567','TU','13A');
INSERT INTO PASAJEROS VALUES('61684124X','IB-SP-4567','PR','2B');
INSERT INTO PASAJEROS VALUES('92369485J','IB-SP-4567','PR','1A');

INSERT INTO PASAJEROS VALUES('64778544X','IB-BA-46DC','TU','12C');
INSERT INTO PASAJEROS VALUES('83787162W','IB-BA-46DC','PR','1A');

INSERT INTO PASAJEROS VALUES('05235652R','FR-DC-4667','TU','20D');
INSERT INTO PASAJEROS VALUES('61684124X','FR-DC-4667','TU','20C');
INSERT INTO PASAJEROS VALUES('83787162W','FR-DC-4667','TU','13A');
INSERT INTO PASAJEROS VALUES('20201908L','FR-DC-4667','TU','13B');
INSERT INTO PASAJEROS VALUES('97871607Y','FR-DC-4667','PR','2A');
INSERT INTO PASAJEROS VALUES('90402407X','FR-DC-4667','PR','1A');

INSERT INTO PASAJEROS VALUES('64778544X','AV-DC9-233','TU','10A');
INSERT INTO PASAJEROS VALUES('61344883L','AV-DC9-233','TU','10B');
INSERT INTO PASAJEROS VALUES('98817632H','AV-DC9-233','PR','1B');

INSERT INTO PASAJEROS VALUES('17079284J','IB-D5-347','PR','2A');
INSERT INTO PASAJEROS VALUES('06201259E','IB-D5-347','PR','2B');
INSERT INTO PASAJEROS VALUES('37182602C','IB-D5-347','TU','20C');
INSERT INTO PASAJEROS VALUES('58344571B','IB-D5-347','TU','20D');


INSERT INTO PASAJEROS VALUES('05235652R','AV-DC2-269','TU','13A');
INSERT INTO PASAJEROS VALUES('61684124X','AV-DC2-269','TU','13B');
INSERT INTO PASAJEROS VALUES('75443224G','AV-DC2-269','PR','1A');

INSERT INTO PASAJEROS VALUES('61344883L','AI-1289-9','PR','1B');
INSERT INTO PASAJEROS VALUES('71632000H','AI-1289-9','PR','2A');
INSERT INTO PASAJEROS VALUES('98821333Q','AI-1289-9','TU','13A');
INSERT INTO PASAJEROS VALUES('65333727L','AI-1289-9','TU','13B');

INSERT INTO PASAJEROS VALUES('92369485J','SP-DC-438','TU','12C');
INSERT INTO PASAJEROS VALUES('20201908L','SP-DC-438','TU','12D');
INSERT INTO PASAJEROS VALUES('71632000H','SP-DC-438','PR','2A');
INSERT INTO PASAJEROS VALUES('78421400W','SP-DC-438','PR','2B');

INSERT INTO PASAJEROS VALUES('61684124X','FR-DC7-247','PR','1A');
INSERT INTO PASAJEROS VALUES('92369485J','FR-DC7-247','TU','12A');
INSERT INTO PASAJEROS VALUES('83787162W','FR-DC7-247','TU','12B');

Commit;

